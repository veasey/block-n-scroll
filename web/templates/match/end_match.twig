{% extends "base.twig" %}

{% block title %}Block &amp; Scroll - End Match {{ match.homeTeam.name }} vs {{ match.awayTeam.name }} {% endblock %}

{% block content %}

    <p class="breadcrumbs">
        <a href="/">Home</a> - 
        Ending Match: 
        <a href="/team/view/{{ match.home_team_id }}">{{ match.homeTeam.name }}</a> vs 
        {% if match.awayTeam.id %}
            <a href="/team/view/{{ match.away_team_id }}">{{ match.awayTeam.name }}</a>
        {% else %}
            {{ match.away_team_name }}
        {% endif %}
    </p>

    <h2>
        Ending Match: 
        <a href="/team/view/{{ match.home_team_id }}">{{ match.homeTeam.name }}</a> vs 
        {% if match.awayTeam.id %}
            <a href="/team/view/{{ match.away_team_id }}">{{ match.awayTeam.name }}</a>
        {% else %}
            {{ match.away_team_name }}
        {% endif %}
    </h2>

    {% if match.home_score == 0 and match.away_score == 0 %}

        <h3>Draw</h3>

        {% set endMatchMessages = [
            "A masterclass in doing absolutely nothing.",
            "They came, they played, they failed to score.",
            "Zeroes on the board, and in the stands.",
            "If boredom were a strategy, both sides nailed it.",
            "Defences strong, attacks… missing.",
            "No touchdowns, no casualties, just yawns.",
            "Did they play, or just jog around for an hour?",
            "Highlight of the game: the halftime snacks.",
            "An inspiring reminder that not every game is worth remembering.",
            "That wasn't Blood Bowl — that was a stretching session."
        ] %}


    {% elseif match.home_score == match.away_score %}

        <h3>Draw</h3>

        {% set endMatchMessages = [
            "Nobody wins, but nobody sulks too hard either.",
            "A clash of titans — or just two teams too tired to finish it.",
            "Evenly matched… or equally mediocre?",
            "Score's even. Emotions? Not so much.",
            "They battled to a standstill — and then to the buffet.",
            "A draw: the universe's way of saying 'meh.'",
            "Well-fought! Shame about the lack of closure.",
            "Both teams claim moral victory. Neither is right.",
            "Deadlock. At least the fans got their money's worth. Maybe.",
            "Stalemate! Like chess, but with more mud and screaming."
        ] %}

    {% else %}

        <h3> Victory for
            {% if match.home_score > match.away_score %}
                {{ match.homeTeam.name }}
            {% else %}
                {{ match.awayTeam.name ?? match.away_team_name }}
            {% endif %}
        </h3>

        {% set endMatchMessages = [
            "And that's all she wrote — time to hit the pub!",
            "Whistles blown, dreams crushed, snacks incoming.",
            "The pitch breathes a sigh of relief — it's over.",
            "Another match down, another excuse to brag.",
            "Everyone survived... barely. Time to log the damage!",
            "Game's done, egos bruised, spirits questionable.",
            "Coach says 'good effort', players say 'where's lunch?'",
            "That's a wrap — now to argue over MVP.",
            "No more touchdowns, just tall tales and stat sheets.",
            "Well, that happened. Let's pretend it went to plan."
        ] %}
    {% endif %}

    {% if mvp_players.home_mvp %}
        <p><strong>MVP</strong> awarded to {% include 'partials/player_link.twig' with {'player': mvp_players.home_mvp} %}
    {% endif %}

    {% if mvp_players.away_mvp %}
        <p><strong>MVP</strong> awarded to {% include 'partials/player_link.twig' with {'player': mvp_players.away_mvp} %}
    {% endif %}

    {% set messages = endMatchMessages %}
    <p class="retirement-message" style="font-style: italic; font-size: 1.2em; margin-top: 1em;">
        <strong>{{ random(messages) }}</strong>
    </p>

    <div class="additional-info">
        {% if recovered_players %}
            <p>The following players are now ready to play bloodbowl again. </p>
            <ul>
            {% for recovered_player in recovered_players %}
                <li> 
                    {% include 'partials/player_link.twig' with {'player': recovered_player} %}
                </li>
            {% endfor %}
            </ul>
        {% endif %}
    </div>

    <p style="margin-top: 1.5em;">
        <a href="/team/view/{{user_team_id}}">← Back to Team</a>
    </p>

{% endblock %}
